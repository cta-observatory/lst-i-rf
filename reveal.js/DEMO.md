# DEMO

But first, questions ?

<!-- vertical slide -->

# Connect to the La Palma cluster

```bash
ssh cp02
```

And activate the conda environment:

```bash
source /fefs/aswg/software/conda/etc/profile.d/conda.sh
conda activate lstchain-v0.10.5
```


<!-- vertical slide -->


## Tune NSB config

Example:

```bash
lstchain_tune_nsb \
--input-mc /fefs/aswg/data/mc/DL0/LSTProd2/TrainingDataset/Protons/dec_2276/sim_telarray/node_theta_23.161_az_99.261_/output_v1.4/simtel_corsika_theta_23.161_az_99.261_run1.simtel.gz \
--input-data /fefs/aswg/data/real/DL1/20240111/v0.10/tailcut84/dl1_LST-1.Run16335.0148.h5 \
--config /fefs/aswg/data/real/DL1/20240111/v0.10/tailcut84/log/lstchain_standard_v0.10_no_heuristic_ff.json
```

Output:

```json
Real data: median across camera of good pixels' pedestal std 2.320 p.e.
Number of pixels beyond 3 std dev of median: 25, (above 3.64 p.e.)
Good and not too bright pixels: 1817


{
  "increase_nsb": true,
  "extra_noise_in_dim_pixels": 1.618,
  "extra_bias_in_dim_pixels": 0.42,
  "transition_charge": 8,
  "extra_noise_in_bright_pixels": 1.857
}
```

<!-- vertical slide -->

## Generate lstmcpipe config

Example:

```
lstmcpipe_generate_config PathConfigAllSkyFullDL1ab --dec_list dec_2276 \
--prod_id atuned_dl1_prod \
--kwargs source_prod_id=20240131_allsky_v0.10.5_all_dec_base
```

- check the generated config file
- modify the config file if necessary. Especially the conda env you want to use.

<!-- vertical slide -->


## Modify the lstchain config file

- Add tuning parameters to the lstchain config file generated by lstmcpipe
- Check and modify other parameters if necessary


<!-- vertical slide -->

## Prepare the pull-request

- add and commit changes in a new branch
- push the branch to the remote repository
- create a pull-request on GitHub
- wait for the CI to pass and for the review

<!-- vertical slide -->

## Prod launch ðŸš€